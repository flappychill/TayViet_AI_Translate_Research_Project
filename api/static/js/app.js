async function run(){const btn=document.getElementById("go");const src=document.getElementById("src");const out=document.getElementById("out");const sel=document.getElementById("direction");btn.disabled=true;out.textContent="Đang dịch...";try{const r=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:src.value,direction:sel.value})});const j=await r.json();out.textContent=j.translation||""}catch(e){out.textContent="Lỗi"}finally{btn.disabled=false}}document.getElementById("go").addEventListener("click",run);